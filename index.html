<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165612044-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-165612044-1');
    </script>
    
    <!-- 구글 애드센스 -->
    <script data-ad-client="ca-pub-2031285067881748" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>대학교 합격증 만들기</title>
    <meta name="description" content="공부 자극이 될 수 있도록 대학교 합격증을 만들 수 있는 사이트">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700,800&display=swap&subset=korean" rel="stylesheet">

    <!-- custom css -->
    <link rel="stylesheet" href="./css/style.css">
    
    <!-- jquery -->
    <script src="https://code.jquery.com/jquery-2.2.1.min.js"></script>

</head>

<body class="bg_black">
    
    <!-- test용 -->
    <a id="a-test" href="https://down.kilho.net/data/Kalmuri.zip?v3.1.10.0" download="aa.png">다운로드</a>
    <canvas id="canvas_pass" width="200" height="200"></canvas>
    
    <!-- HTML의 시작 -->
    <div class="row justify-content-md-center p-2">
        <div class="col-md-8 border rounded">
            
            <!-- 대학교 선택 -->
            <div class="bg-white py-2">
                <div class="bg-secondary rounded p-4 text-center">
                    <div id="univ_select" class="btn-group dropright">
                        <button type="button" class="mr-2 btn btn-danger dropdown-toggle" data-toggle="dropdown" aria-haspopup="true">
                            연세대학교
                        </button>
                        <div class="dropdown-menu pre-scrollable">
                            <a href="#" class="dropdown-item">가톨릭대학교</a>
                            <a href="#" class="dropdown-item">건국대학교</a>
                            <a href="#" class="dropdown-item">경기대학교</a>
                            <a href="#" class="dropdown-item">경희대학교</a>
                            <a href="#" class="dropdown-item">고려대학교</a>
                            <a href="#" class="dropdown-item">광운대학교</a>
                            <a href="#" class="dropdown-item">국민대학교</a>
                            <a href="#" class="dropdown-item">동국대학교</a>
                            <a href="#" class="dropdown-item">명지대학교</a>
                            <a href="#" class="dropdown-item">삼육대학교</a>
                            <a href="#" class="dropdown-item">상명대학교</a>
                            <a href="#" class="dropdown-item">서강대학교</a>
                            <a href="#" class="dropdown-item">서경대학교</a>
                            <a href="#" class="dropdown-item">서울대학교</a>
                            <a href="#" class="dropdown-item">서울과학기술대학교</a>
                            <a href="#" class="dropdown-item">서울시립대학교</a>
                            <a href="#" class="dropdown-item">성공회대학교</a>
                            <a href="#" class="dropdown-item">성균관대학교</a>
                            <a href="#" class="dropdown-item">세종대학교</a>
                            <a href="#" class="dropdown-item">숭실대학교</a>
                            <a href="#" class="dropdown-item">연세대학교</a>
                            <a href="#" class="dropdown-item">중앙대학교</a>
                            <a href="#" class="dropdown-item">총신대학교</a>
                            <a href="#" class="dropdown-item">한국외국어대학교</a>
                            <a href="#" class="dropdown-item">한성대학교</a>
                            <a href="#" class="dropdown-item">한양대학교</a>
                            <a href="#" class="dropdown-item">홍익대학교</a>
                            <a href="#" class="dropdown-item">숙명여자대학교</a>
                            <a href="#" class="dropdown-item">이화여자대학교</a>
                        </div>
                    </div>
                    <span class="font-weight-bold text-white">
                        내가 가고싶은
                        <span class="text-success">대학교</span>는?
                    </span>
                </div>
            </div>
            
            <hr>

            <!-- 대학교 로고 및 제작자 정보 -->
            <div class="bg-white rounded border-dark text-center">
                <img id="cert-title-image" src="./images/yonsei.png" class="m-3 w-50" style="max-width: 300px;">
                <h1 id="cert-title-text" class="font-weight-bold text-primary">
                    연세대학교<br> 합격증 만들기
                </h1>
                <p class="text-secondary text-center">
                    <small>
                        created by 바람개비
                        <br> mail : cjh9217@naver.com
                        <br>
                        <a href="http://gaibeelife.tistory.com">blog : http://gaibeelife.tistory.com</a>

                    </small>
                </p>
            </div>

            <hr>

            <div id="text-wrap" class="bg-white">
                <div class="bg-secondary rounded p-4">

                    <!-- 여기서부터 텍스트와 버튼이 들어감-->
                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">대학학부(과)</span>
                        </div>
                        <input type="text" id="txt1" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">수험번호</span>
                        </div>
                        <input type="text" id="txt2" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">성명</span>
                        </div>
                        <input type="text" id="txt3" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">생년월일</span>
                        </div>
                        <input type="text" id="txt4" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                    </div>

                    <div class="input-group mb-3">
                        <div class="input-group-prepend">
                            <span class="input-group-text">년도</span>
                        </div>
                        <input type="text" id="txt5" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
                    </div>

                    <div class="text-right">
                        <button type="button" id="btn_show" onclick="make_preview();" class="btn btn-primary text-center" style="width: 200px;">만들기</button>
                    </div>
                </div>
            </div>

            <!-- 카카오 애드핏 광고 -->
            <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-1hru9wby27ynp" data-ad-width="320" data-ad-height="100"></ins>
            <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>

            <!-- 결과 미리보기 -->
                <div id="img-wrap" class="bg-white">
                    <div class="bg-secondary rounded p-2">
                        <h2 class="text-white font-weight-bold text-center">
                            결과 미리보기
                        </h2>

                        <iframe id="frame_preview" src="./example_image.html?univ_id=21&univ_name=연세대학교&part=&number=&name=&birth=&year=2030" scrolling="no" frameborder="0" class="w-100" onload="calcHeight();">
                        </iframe>

                        <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#exampleModal">
                            저장하기
                        </button>
                        <a id="link"></a>
                    </div>
                </div>


            <!-- Modal -->
            <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog" role="document">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title" id="exampleModalLabel">대학교 합격증 만들기</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&times;</span>
                            </button>
                        </div>
                        <div class="modal-body" style="width:250px; height:290px; margin:0 auto;">
                            <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-skq2m1w66ed1" data-ad-width="250" data-ad-height="250"></ins>
                        </div>
                        <div class="modal-footer">
                            <button type="button" id="btn_modal_close" class="btn btn-secondary" data-dismiss="modal">닫기</button>
                            <button type="button" onclick="submitForm();" class="btn btn-primary">사진 저장하기</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>




    <!-- make_image.html에 보낼 데이터를 만드는 form -->
    <form name="frm_make_image" action="./example_image.html" method="GET" accept-charset="utf-8" target="_blank">
        <input type="hidden" name="univ_id" value="21">
        <input type="hidden" name="univ_name" value="연세대학교">
        <input type="hidden" name="part" value="">
        <input type="hidden" name="number" value="">
        <input type="hidden" name="name" value="">
        <input type="hidden" name="birth" value="">
        <input type="hidden" name="year" value="">
        <input type="hidden" name="save_img" value="yes">
    </form>
    
    <!-- test용 자바스크립트 -->
    <script>
        var canvas = document.getElementById('canvas_pass');
        var ctx = canvas.getContext("2d");
        
        var img = document.getElementById('cert-title-image');
        img.addEventListener('load', function(){
            ctx.drawImage(img, 0, 0, 200, 200);
            
            var a_test = document.getElementById('a-test');
            a_test.href = canvas.toDataURL('image/png');
        });
        

        
        
    </script>
    

    <!-- html 갱신 -->
    <script>
        var selected_id = 21; // 기본값으로 연세대 선택
        var selected_name = "연세대학교";
        
         $('#univ_select div a').bind('click', function(e) {
             var html = $(this).html();
             $('#univ_select button.dropdown-toggle').html(html);
             
             selected_id = $(this).index() + 1;
             selected_name = html;
             
             update_html_by_univ();
         });

        function update_html_by_univ() {
            $("#cert-title-image").attr("src", "./images/univ_logo/" + selected_id + ".jpg")
            $("#cert-title-text").html(selected_name + "<br>합격증 만들기")
        }
        
        
    </script>

    <!-- make_html로 submit 시키는 부분 -->
    <script>
        function submitForm() {
            document.frm_make_image.univ_name.value = selected_name;
            document.frm_make_image.univ_id.value = selected_id;
            document.frm_make_image.part.value = $("#txt1").val();
            document.frm_make_image.number.value = $("#txt2").val();
            document.frm_make_image.name.value = $("#txt3").val();
            document.frm_make_image.birth.value = $("#txt4").val();
            document.frm_make_image.year.value = $("#txt5").val();
            document.frm_make_image.submit();
            
            $("#btn_modal_close").click();
        }
    </script>

    <!-- iframe 제어 부분 -->
    <script>
        // 윈도우 크기가 resize 될 때 iframe 크기도 조절
        $(window).resize(function() {
            calcHeight();
        })
        
        // iframe이 load 완료되었을 때 iframe 크기 조절
        $('#frame_preview').load(function() {
            calcHeight();
        })
        
        /* height 자동 조절 */
        function calcHeight() {
            var width = $('#frame_preview').width();
            $('#frame_preview').height(width / 793 * 1122);
        }
        
        /* 만들기 버튼 클릭시 iframe src 수정 */
        function make_preview() {
            var src = "./example_image.html?univ_id=selected_id&univ_name=selected_name&part=txt1&number=txt2&name=txt3&birth=txt4&year=txt5";
            src = src.replace("selected_id", selected_id);
            src = src.replace("selected_name", selected_name);
            src = src.replace("txt1", $("#txt1").val());
            src = src.replace("txt2", $("#txt2").val());
            src = src.replace("txt3", $("#txt3").val());
            src = src.replace("txt4", $("#txt4").val());
            src = src.replace("txt5", $("#txt5").val());
            document.getElementById('frame_preview').src = src;
        }
    </script>

    <!-- bootstrap script -->
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <!-- html2canvas CDM -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</body>

</html>