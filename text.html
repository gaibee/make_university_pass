<!DOCTYPE html>
<html>

<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-165612044-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];

        function gtag() {
            dataLayer.push(arguments);
        }
        gtag('js', new Date());
        gtag('config', 'UA-165612044-1');
    </script>

    <title>대학교 합격증 만들기</title>
    <meta name="description" content="공부 자극이 될 수 있도록 대학교 합격증을 만들 수 있는 사이트">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- bootstrap css -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">

    <!-- font -->
    <link href="https://fonts.googleapis.com/css?family=Nanum+Myeongjo:400,700,800&display=swap&subset=korean" rel="stylesheet">

    <!-- custom css -->
    <link rel="stylesheet" href="./css/style.css">

</head>

<body>
    <input type="button" id="btn_top_save" value="top button" onclick="save_data();">
    <div>
        <h1>
            바른 말
        </h1>

        <div class="abc">
            <h1>
                짤2
            </h1>
            <div id="capture">
                <h2 style="font-weight:bold; padding:50px 50px 50px 50px">
                    희희
                </h2>
                <h1>
                    갸갸
                </h1>
            </div>
            <input type="button" value="클릭!" onclick="save_data()">
        </div>
    </div>
    <input type="button" value="클릭!" onclick="save_data()">

    <!-- HTML의 시작 -->
    <div class="bg-white rounded border-dark w-100 p-5 mn-100 text-center">
        <img src="./images/yslogo.png" class="m-3 w-50" style="max-width: 300px;">
        <h1 class="font-weight-bold text-primary">
            연세대학교 합격증 만들기
        </h1>
        <input type="button" value="클릭!" onclick="save_clone()">
        <p class="text-secondary text-center">
            <small>
                created by 바람개비
                <br> mail : cjh9217@naver.com
                <br>
                <a href="http://gaibeelife.tistory.com">blog : http://gaibeelife.tistory.com</a>

            </small>
        </p>
    </div>

    <div id="text-wrap" class="bg-white w-100 p-3">
        <div class="bg-secondary rounded p-4">

            <!-- 여기서부터 텍스트와 버튼이 들어감-->
            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">대학학부(과)</span>
                </div>
                <input type="text" id="txt1" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">수험번호</span>
                </div>
                <input type="text" id="txt2" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">성명</span>
                </div>
                <input type="text" id="txt3" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">생년월일</span>
                </div>
                <input type="text" id="txt4" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>

            <div class="input-group mb-3">
                <div class="input-group-prepend">
                    <span class="input-group-text">년도</span>
                </div>
                <input type="text" id="txt5" class="form-control" aria-label="Sizing example input" aria-describedby="inputGroup-sizing-default">
            </div>

            <div class="text-right">
                <button type="button" id="btn_show" onclick="load_canvas(true)" class="btn btn-primary text-center" style="width: 200px;">만들기</button>
            </div>
        </div>
    </div>

    <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-1hru9wby27ynp" data-ad-width="320" data-ad-height="100"></ins>
    <script type="text/javascript" src="//t1.daumcdn.net/kas/static/ba.min.js" async></script>

    <!-- 이미지 저장 원래 버젼 부분 -->
    <div id="img-wrap" class="bg-white w-100 p-3">
        <div class="bg-secondary rounded p-4 text-center">
            <h2 class="text-white font-weight-bold mb-4">
                결과 미리보기
            </h2>
            <canvas id="myCanvas" width="500" hegith="500" class="mb-3"></canvas>
            <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#exampleModal">
                저장하기
            </button>
            <a id="link"></a>
        </div>
    </div>

    <!-- 이미지 저장 새로운 버젼 부분 -->
    <div id="img-wrap" class="bg-white w-100 p-3">
        <div class="bg-secondary rounded p-4 text-center">
            <h2 class="text-white font-weight-bold mb-4">
                결과 미리보기
            </h2>

            <!-- 합격증을 그려주는 영역 -->
            <!-- font 적용 : style="font-family: 'Nanum Myeongjo', serif;" -->
            <div id="capture_all">

                <div id="capture_me" class="mb-3" style="left:0; top:0; botton:0; right:0;">
                    <div id="div_certificate_master" class="bg-white" style="width:70vw; height: 98vw; margin:0 auto; position:relative; font-family: 궁서;">

                        <img src="./images/yslogo.png" class="img_logo">
                        <div class="div_for_z_index" style="position:relative; z-index:2">

                            <div class="cert-p-5"></div>
                            <div class="cert-p-1"></div>
                            <div style="position:relative;">
                                <p class="cert_title">
                                    <span>합 격 통 지 서</span>
                                </p>
                                <div class="cert-p-3"></div>
                                <div class="student_info_wrap text-left">
                                    <p class="student_info_text">
                                        <span>대학학부(과)</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>수 험 번 호</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>성 명</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>생 년 월 일</span>
                                    </p>
                                </div>

                                <div class="student_info_write_wrap text-left">
                                    <p class="student_info_text">
                                        <span>치의예과</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>EEAP80063</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>최영진</span>
                                    </p>
                                    <p class="student_info_text">
                                        <span>950110</span>
                                    </p>
                                </div>

                            </div>
                            <div class="cert-p-5"></div>
                            <div class="cert-p-5"></div>
                            <div class="cert-p-1"></div>
                            <div class="cert_sub">
                                <p class="cert_text">
                                    위 사람은 2020학년도 우리 대학교 입학 전형에 합격하였음을 통지합니다.
                                </p>
                            </div>
                            <div class="cert-p-1"></div>
                            <p class="cert_text">
                                2019년 12월 10일
                            </p>
                            <div class="cert-p-1"></div>
                            <p class="cert_president">
                                고 려 대 학 교 총 장
                            </p>

                        </div>
                    </div>
                </div>
            </div>

            <button type="button" class="btn btn-primary w-100" data-toggle="modal" data-target="#exampleModal">
                저장하기
            </button>
            <a id="link"></a>
        </div>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">대학교 합격증 만들기</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="width:250px; height:290px; margin:0 auto;">
                    <ins class="kakao_ad_area" style="display:none;" data-ad-unit="DAN-skq2m1w66ed1" data-ad-width="250" data-ad-height="250"></ins>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    <button type="button" onclick="save_data();" class="btn btn-primary">사진 저장하기</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        
        
        $("#btn_top_save").click(function() {
           alert("dd"); 
        });
        
        function save() {
            html2canvas(document.querySelector("#capture")).then(function(canvas) {
                document.body.appendChild(canvas);
            });
        }
        
        
    </script>

    <script>
        function save_data() {
            alert("save data!");
            /*
            var canvas = document.getElementById('myCanvas');
            var link = document.getElementById('link');
            link.setAttribute('download', 'yspass.png');
            link.setAttribute('href', canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"));
            link.click();
            html2canvas(document.querySelector("#capture")).then(canvas => {
                saveAs(canvas.toDataURL('image/png'), "certificate.png");
            });*/
            html2canvas(document.querySelector("#capture_all")).then(function(canvas) {
                document.body.appendChild(canvas);
            });
        }
        // 클론을 만드는 함수
        function hiddenClone(element) {
            // Create clone of element
            var clone = element.cloneNode(true);
            // Position element relatively within the 
            // body but still out of the viewport
            var style = clone.style;
            style.position = 'relative';
            style.top = window.innerHeight + 'px';
            style.left = 0;
            // Append clone to body and return the clone
            document.body.appendChild(clone);
            return clone;
        }

        function save_clone() {
            var offScreen = document.querySelector('#capture_me');
            // Clone off-screen element
            var clone = hiddenClone(offScreen);
            // Use clone with htm2canvas and delete clone
            html2canvas(clone, {
                onrendered: function(canvas) {
                    document.body.appendChild(canvas);
                    document.body.removeChild(clone);
                }
            });
        }

        function saveAs(uri, filename) {
            // 캡쳐된 파일을 이미지 파일로 내보낸다.
            var link = document.createElement('a');
            if (typeof link.download === 'string') {
                link.href = uri;
                link.download = filename;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
            } else {
                window.open(uri);
            }
        }
    </script>

    <!-- bootstrap script -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script> 
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js" integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous"></script>
    <script class="jsbin" src="https://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>

    <!-- html2canvas CDM -->
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
</body>

</html>